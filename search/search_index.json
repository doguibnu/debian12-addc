{"config":{"indexing":"full","lang":["pt"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Debian 12 como AD-DC O documento tem como finalidade, ajudar administradores de sistema com a instala\u00e7\u00e3o do Samba AD-DC em modo compilado no sistema operacional Debian 12. A vers\u00e3o do Samba ser\u00e1 a 4.18.6 Refer\u00eancias: Samba AD-DC kinit","title":"In\u00edcio"},{"location":"#debian-12-como-ad-dc","text":"O documento tem como finalidade, ajudar administradores de sistema com a instala\u00e7\u00e3o do Samba AD-DC em modo compilado no sistema operacional Debian 12. A vers\u00e3o do Samba ser\u00e1 a 4.18.6 Refer\u00eancias: Samba AD-DC kinit","title":"Debian 12 como AD-DC"},{"location":"aprofile/aprofile/","text":"Editar o arquivo .profile O objetivo \u00e9 chamar o comando samba-tool independente do caminho que voc\u00ea estiver no sistema. Para editar o arquivo /root/.profile fa\u00e7a o comando: nano /root/.profile Adicionar a linha ao final do arquivo PATH=/usr/local/samba/bin/:/usr/local/samba/sbin/:$PATH export PATH salvar o arquivo: Para salvar: control+o e para sair: control+x Executar um reboot: reboot","title":"Editar Arquivo profile"},{"location":"aprofile/aprofile/#editar-o-arquivo-profile","text":"O objetivo \u00e9 chamar o comando samba-tool independente do caminho que voc\u00ea estiver no sistema. Para editar o arquivo /root/.profile fa\u00e7a o comando: nano /root/.profile Adicionar a linha ao final do arquivo PATH=/usr/local/samba/bin/:/usr/local/samba/sbin/:$PATH export PATH salvar o arquivo: Para salvar: control+o e para sair: control+x Executar um reboot: reboot","title":"Editar o arquivo .profile"},{"location":"baixarsamba/baixarsamba/","text":"Baixar o Samba Obs: a vers\u00e3o a ser baixada ser\u00e1 a 4.18.6 . Fazer um diret\u00f3rio tempor\u00e1rio para baixar o samba: mkdir tempsamba Mudar para o diret\u00f3rio criado: cd tempsamba Baixar o samba com o comando: wget https://download.samba.org/pub/samba/stable/samba-4.18.6.tar.gz Descompactar o arquivo baixado: tar -zxvf samba-nome-arquivo Mudar para o diret\u00f3rio onde foi descompactado: cd samba-nome-arquivo/ Compilar o samba para o arquivo de configura\u00e7\u00e3o ficar em: /etc/samba/smb.conf com o comando: ./configure --sysconfdir=/etc/samba/ Se n\u00e3o houver nenhum erro, o sistema deve apresentar um resultado parecido como abaixo: Checking if compiler accepts -fstack-clash-protection : yes 'configure' finished successfully (1m10.556s) Fazer os comandos make e make install : OBS: dependendo de sua configura\u00e7\u00e3o este procedimento \u00e9 demorado, ent\u00e3o aguarde a finaliza\u00e7\u00e3o: make && make install Se nenhum erro ocorrer no procedimento, o sistema vai mostrar um resultado parecido como abaixo: Waf: Leaving directory `/root/tempsamba/samba-4.18.6/bin/default' 'install' finished successfully (4m36.452s)","title":"Baixar o Samba"},{"location":"baixarsamba/baixarsamba/#baixar-o-samba","text":"Obs: a vers\u00e3o a ser baixada ser\u00e1 a 4.18.6 . Fazer um diret\u00f3rio tempor\u00e1rio para baixar o samba: mkdir tempsamba Mudar para o diret\u00f3rio criado: cd tempsamba Baixar o samba com o comando: wget https://download.samba.org/pub/samba/stable/samba-4.18.6.tar.gz Descompactar o arquivo baixado: tar -zxvf samba-nome-arquivo Mudar para o diret\u00f3rio onde foi descompactado: cd samba-nome-arquivo/ Compilar o samba para o arquivo de configura\u00e7\u00e3o ficar em: /etc/samba/smb.conf com o comando: ./configure --sysconfdir=/etc/samba/ Se n\u00e3o houver nenhum erro, o sistema deve apresentar um resultado parecido como abaixo: Checking if compiler accepts -fstack-clash-protection : yes 'configure' finished successfully (1m10.556s) Fazer os comandos make e make install : OBS: dependendo de sua configura\u00e7\u00e3o este procedimento \u00e9 demorado, ent\u00e3o aguarde a finaliza\u00e7\u00e3o: make && make install Se nenhum erro ocorrer no procedimento, o sistema vai mostrar um resultado parecido como abaixo: Waf: Leaving directory `/root/tempsamba/samba-4.18.6/bin/default' 'install' finished successfully (4m36.452s)","title":"Baixar o Samba"},{"location":"hosts/hosts/","text":"Editar o arquivo hosts Para editar o arquivo, execute o comando: nano /etc/hosts O conte\u00fado deve parecer com as linhas abaixo: 127.0.0.1 localhost Edite esta linha abaixo para atender seu cen\u00e1rio: 10.1.1.21 DEBIAN12-AD.seu.dominio DEBIAN12-AD Onde: 10.1.1.21 = ip do seu pr\u00f3prio AD DEBIAN12-AD.seu.dom\u00ednio = nome completo do seu DC DEBIAN12-AD = nome encurtado","title":"Editar Arquivo hosts"},{"location":"hosts/hosts/#editar-o-arquivo-hosts","text":"Para editar o arquivo, execute o comando: nano /etc/hosts O conte\u00fado deve parecer com as linhas abaixo: 127.0.0.1 localhost Edite esta linha abaixo para atender seu cen\u00e1rio: 10.1.1.21 DEBIAN12-AD.seu.dominio DEBIAN12-AD Onde: 10.1.1.21 = ip do seu pr\u00f3prio AD DEBIAN12-AD.seu.dom\u00ednio = nome completo do seu DC DEBIAN12-AD = nome encurtado","title":"Editar o arquivo hosts"},{"location":"install/instalar/","text":"Baixar o Debian 12 Pode baixar o Debian 12 atrav\u00e9s deste Link ou deste Ao iniciar a instala\u00e7\u00e3o: Escolher a linguagem: Portugu\u00eas do Brasil Selecionar a localidade: Brasil Configura\u00e7\u00e3o do teclado: portugu\u00eas brasileiro Caso sua rede esteja em DHCP , eu seleciono voltar no menu de instala\u00e7\u00e3o e seleciono a op\u00e7\u00e3o manual para setar IP Est\u00e1tico Configurar a rede Manualmente Endere\u00e7o IP: seu ip (10.1.1.21 por exemplo) m\u00e1scara de rede: 255.255.255.0 Gateway: 10.1.1.1 ou seu gateway de sa\u00edda pra internet Servidor de nomes DNS: selecione um de seu gosto ou da sua rede Nome da m\u00e1quina: debian12-ad Nome do dom\u00ednio: seu.dominio senha de root: escolha uma senha de root repita a senha de root: Nome completo para o novo usu\u00e1rio: debian12-ad Nome do usu\u00e1rio para sua conta: debian12-ad Informe a senha do usu\u00e1rio: escolha uma senha de usu\u00e1rio repita a senha: Escolha um fuso hor\u00e1rio: S\u00e3o Paulo Metodo de particionamento: Assistido - usar o disco inteiro ou escolha como desejar Selecione o disco (parti\u00e7\u00e3o): Esquema de Particionamento: Todos os arquivos em uma parti\u00e7\u00e3o ou da forma que desejar Verifique as configura\u00e7\u00f5es do Particionador e selecione Finalizar o particionamento e escrever as mudan\u00e7as no disco Em Particionar discos analise as mudan\u00e7as escolha sim O processo de instala\u00e7\u00e3o ir\u00e1 iniciar Configurar o gerenciador de pacotes e ler m\u00eddia de instala\u00e7\u00e3o adicional: selecionar n\u00e3o Configurar o pa\u00eds do gerenciador de pacotes (reposit\u00f3rio: Brasil) Espelho de reposit\u00f3rio Debian: deb.debian.org Se n\u00e3o utilizar proxy http, selecione a op\u00e7\u00e3o: continuar Configurando popularity-contest: selecionar n\u00e3o Sele\u00e7\u00e3o de Softwares: Selecionar o que desejar + servidor ssh Configurar o Grub e instalar o carregador de inicializa\u00e7\u00e3o no seu disco prim\u00e1rio: selecionar sim Informe o particoionamento (/dev/sda) , sendo o seu prim\u00e1rio Finalizar a instala\u00e7\u00e3o: Continuar O sistema ir\u00e1 Reiniciar","title":"Baixar Debian 12"},{"location":"install/instalar/#baixar-o-debian-12","text":"Pode baixar o Debian 12 atrav\u00e9s deste Link ou deste Ao iniciar a instala\u00e7\u00e3o: Escolher a linguagem: Portugu\u00eas do Brasil Selecionar a localidade: Brasil Configura\u00e7\u00e3o do teclado: portugu\u00eas brasileiro Caso sua rede esteja em DHCP , eu seleciono voltar no menu de instala\u00e7\u00e3o e seleciono a op\u00e7\u00e3o manual para setar IP Est\u00e1tico Configurar a rede Manualmente Endere\u00e7o IP: seu ip (10.1.1.21 por exemplo) m\u00e1scara de rede: 255.255.255.0 Gateway: 10.1.1.1 ou seu gateway de sa\u00edda pra internet Servidor de nomes DNS: selecione um de seu gosto ou da sua rede Nome da m\u00e1quina: debian12-ad Nome do dom\u00ednio: seu.dominio senha de root: escolha uma senha de root repita a senha de root: Nome completo para o novo usu\u00e1rio: debian12-ad Nome do usu\u00e1rio para sua conta: debian12-ad Informe a senha do usu\u00e1rio: escolha uma senha de usu\u00e1rio repita a senha: Escolha um fuso hor\u00e1rio: S\u00e3o Paulo Metodo de particionamento: Assistido - usar o disco inteiro ou escolha como desejar Selecione o disco (parti\u00e7\u00e3o): Esquema de Particionamento: Todos os arquivos em uma parti\u00e7\u00e3o ou da forma que desejar Verifique as configura\u00e7\u00f5es do Particionador e selecione Finalizar o particionamento e escrever as mudan\u00e7as no disco Em Particionar discos analise as mudan\u00e7as escolha sim O processo de instala\u00e7\u00e3o ir\u00e1 iniciar Configurar o gerenciador de pacotes e ler m\u00eddia de instala\u00e7\u00e3o adicional: selecionar n\u00e3o Configurar o pa\u00eds do gerenciador de pacotes (reposit\u00f3rio: Brasil) Espelho de reposit\u00f3rio Debian: deb.debian.org Se n\u00e3o utilizar proxy http, selecione a op\u00e7\u00e3o: continuar Configurando popularity-contest: selecionar n\u00e3o Sele\u00e7\u00e3o de Softwares: Selecionar o que desejar + servidor ssh Configurar o Grub e instalar o carregador de inicializa\u00e7\u00e3o no seu disco prim\u00e1rio: selecionar sim Informe o particoionamento (/dev/sda) , sendo o seu prim\u00e1rio Finalizar a instala\u00e7\u00e3o: Continuar O sistema ir\u00e1 Reiniciar","title":"Baixar o Debian 12"},{"location":"instpacotes/instpacotes/","text":"Instalar Pacotes Pacotes requeridos para instala\u00e7\u00e3o do samba em modo compilado. Utilizar o comando abaixo: apt-get install -y acl attr autoconf bind9utils bison build-essential debhelper dnsutils docbook-xml docbook-xsl flex gdb libjansson-dev krb5-user libacl1-dev libaio-dev libarchive-dev libattr1-dev libblkid-dev libbsd-dev libcap-dev libcups2-dev libgnutls28-dev libgpgme-dev libjson-perl libldap2-dev libncurses5-dev libpam0g-dev libparse-yapp-perl libpopt-dev libreadline-dev nettle-dev perl perl-modules-5.36 pkg-config python3-all-dev python3-cryptography python3-dbg python3-dev python3-dnspython python3-dnspython python3-gpg python3-markdown python3-dev xsltproc zlib1g-dev liblmdb-dev lmdb-utils libkrb5-dev krb5-kdc libdbus-1-dev libtasn1-bin winbind Obs: altere os dados conforme seu cen\u00e1rio. Primeiro questionamento, informar seu: Realm Kerberos: SEU.DOMINIO Repetir: SEU.DOMINIO Servidor administrador: debian12-ad.seu.dominio e repita a resposta anterior.","title":"Instalar Pacotes"},{"location":"instpacotes/instpacotes/#instalar-pacotes","text":"Pacotes requeridos para instala\u00e7\u00e3o do samba em modo compilado. Utilizar o comando abaixo: apt-get install -y acl attr autoconf bind9utils bison build-essential debhelper dnsutils docbook-xml docbook-xsl flex gdb libjansson-dev krb5-user libacl1-dev libaio-dev libarchive-dev libattr1-dev libblkid-dev libbsd-dev libcap-dev libcups2-dev libgnutls28-dev libgpgme-dev libjson-perl libldap2-dev libncurses5-dev libpam0g-dev libparse-yapp-perl libpopt-dev libreadline-dev nettle-dev perl perl-modules-5.36 pkg-config python3-all-dev python3-cryptography python3-dbg python3-dev python3-dnspython python3-dnspython python3-gpg python3-markdown python3-dev xsltproc zlib1g-dev liblmdb-dev lmdb-utils libkrb5-dev krb5-kdc libdbus-1-dev libtasn1-bin winbind Obs: altere os dados conforme seu cen\u00e1rio. Primeiro questionamento, informar seu: Realm Kerberos: SEU.DOMINIO Repetir: SEU.DOMINIO Servidor administrador: debian12-ad.seu.dominio e repita a resposta anterior.","title":"Instalar Pacotes"},{"location":"joinwin/joinwin/","text":"Windows 10 join Debian AD-DC Nesta figura vimos o Windows 10 juntando-se ao Debian AD-DC:","title":"Win10 Join Debian AD-DC"},{"location":"joinwin/joinwin/#windows-10-join-debian-ad-dc","text":"Nesta figura vimos o Windows 10 juntando-se ao Debian AD-DC:","title":"Windows 10 join Debian AD-DC"},{"location":"krb5/krb5conf/","text":"Editar o arquivo krb5.conf Esta altera\u00e7\u00e3o \u00e9 necess\u00e1ria para que o sistema mostre a valida\u00e7\u00e3o do tickets. O que ser\u00e1 alterado e adicionado? A primeira altera\u00e7\u00e3o ser\u00e1 na linha: dns_lookup_realm = false deve ser alterado para: dns_lookup_realm = true Adicione estas duas linhas ao seu arquivo, que s\u00e3o obrigat\u00f3rias para obter os tickets: forward = true forwardable = true A pr\u00f3xima altera\u00e7\u00e3o \u00e9 na linha realms . Adicione desta forma, alterando os dados para seu cen\u00e1rio: [realms] SEU.DOMINIO = { # Adicione estas linhas abaixo alterando os nomes para seu cen\u00e1rio admin_server = DEBIAN12-AD.SEU.DOMINIO kdc = DEBIAN12-AD.SEU.DOMINIO } E tamb\u00e9m a linha domain_realm , alterando como mostra abaixo, e altere os dados para seu cen\u00e1rio: [domain_realm] # E estas duas \u00faltimas altere tamb\u00e9m para atender seu cen\u00e1rio debian12-ad = SEU.DOMINIO .seu.dominio = SEU.DOM\u00cdNIO Obeserve ent\u00e3o, como ficar\u00e1 o arquivo krb5.conf Editar o arquivo com o comando: nano /etc/krb5.conf [libdefaults] default_realm = SEU.DOMINIO # troque esta linha abaixo (dns_lookup_realm) para true dns_lookup_realm = true dns_lookup_kdc = true # Estas duas linhas abaixo s\u00e3o obrigat\u00f3rias para obter os Tickets do KDC forward = true forwardable = true [realms] SEU.DOMINIO = { # Adicione estas linhas abaixo alterando os nomes para seu cen\u00e1rio admin_server = DEBIAN12-AD.SEU.DOMINIO kdc = DEBIAN12-AD.SEU.DOMINIO } [domain_realm] # E estas duas \u00faltimas altere tamb\u00e9m para atender seu cen\u00e1rio debian12-ad = SEU.DOMINIO .seu.dominio = SEU.DOM\u00cdNIO Salve o arquivo: Para salvar: control+o e para sair: control+x Verifique a figura abaixo. Foi executado sem erros: kinit Administrator e logo ap\u00f3s: klist :","title":"Editar o arquivo krb5.conf"},{"location":"krb5/krb5conf/#editar-o-arquivo-krb5conf","text":"Esta altera\u00e7\u00e3o \u00e9 necess\u00e1ria para que o sistema mostre a valida\u00e7\u00e3o do tickets. O que ser\u00e1 alterado e adicionado? A primeira altera\u00e7\u00e3o ser\u00e1 na linha: dns_lookup_realm = false deve ser alterado para: dns_lookup_realm = true Adicione estas duas linhas ao seu arquivo, que s\u00e3o obrigat\u00f3rias para obter os tickets: forward = true forwardable = true A pr\u00f3xima altera\u00e7\u00e3o \u00e9 na linha realms . Adicione desta forma, alterando os dados para seu cen\u00e1rio: [realms] SEU.DOMINIO = { # Adicione estas linhas abaixo alterando os nomes para seu cen\u00e1rio admin_server = DEBIAN12-AD.SEU.DOMINIO kdc = DEBIAN12-AD.SEU.DOMINIO } E tamb\u00e9m a linha domain_realm , alterando como mostra abaixo, e altere os dados para seu cen\u00e1rio: [domain_realm] # E estas duas \u00faltimas altere tamb\u00e9m para atender seu cen\u00e1rio debian12-ad = SEU.DOMINIO .seu.dominio = SEU.DOM\u00cdNIO Obeserve ent\u00e3o, como ficar\u00e1 o arquivo krb5.conf Editar o arquivo com o comando: nano /etc/krb5.conf [libdefaults] default_realm = SEU.DOMINIO # troque esta linha abaixo (dns_lookup_realm) para true dns_lookup_realm = true dns_lookup_kdc = true # Estas duas linhas abaixo s\u00e3o obrigat\u00f3rias para obter os Tickets do KDC forward = true forwardable = true [realms] SEU.DOMINIO = { # Adicione estas linhas abaixo alterando os nomes para seu cen\u00e1rio admin_server = DEBIAN12-AD.SEU.DOMINIO kdc = DEBIAN12-AD.SEU.DOMINIO } [domain_realm] # E estas duas \u00faltimas altere tamb\u00e9m para atender seu cen\u00e1rio debian12-ad = SEU.DOMINIO .seu.dominio = SEU.DOM\u00cdNIO Salve o arquivo: Para salvar: control+o e para sair: control+x Verifique a figura abaixo. Foi executado sem erros: kinit Administrator e logo ap\u00f3s: klist :","title":"Editar o arquivo krb5.conf"},{"location":"linklib/linklib/","text":"Lincando libnss_winbind.so.2 (para debian) Quando o samba \u00e9 instalando por modo de compila\u00e7\u00e3o \u00e9 necess\u00e1rio fazer os comandos para linkar a libnss_winbind.so.2 Os comandos s\u00e3o: ln -s /usr/local/samba/lib/libnss_winbind.so.2 /lib/x86_64-linux-gnu/ ln -s /lib/x86_64-linux-gnu/libnss_winbind.so.2 /lib/x86_64-linux-gnu/libnss_winbind.so ldconfig","title":"Linkar libnss"},{"location":"linklib/linklib/#lincando-libnss_winbindso2-para-debian","text":"Quando o samba \u00e9 instalando por modo de compila\u00e7\u00e3o \u00e9 necess\u00e1rio fazer os comandos para linkar a libnss_winbind.so.2 Os comandos s\u00e3o: ln -s /usr/local/samba/lib/libnss_winbind.so.2 /lib/x86_64-linux-gnu/ ln -s /lib/x86_64-linux-gnu/libnss_winbind.so.2 /lib/x86_64-linux-gnu/libnss_winbind.so ldconfig","title":"Lincando libnss_winbind.so.2 (para debian)"},{"location":"provsamba/provsamba/","text":"Provisionar o Samba (modo interativo): Verifique o ip com o comando: ip a O resultador pode parecer com este abaixo: 2: ens18: mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 8e:a2:1e:57:9a:9e brd ff:ff:ff:ff:ff:ff altname enp0s18 inet 10.1.1.21/8 brd 10.255.255.255 scope global ens18 Ent\u00e3o, seu dispositivo de rede \u00e9 o ens18 Remover o arquivo smb.conf com o comando: rm /etc/samba/smb.conf Provisionar o Samba Utilizar o comando abaixo: samba-tool domain provision --use-rfc2307 --interactive --option=\"interfaces= lo ens18\" --option=\"bind interfaces only=yes\" Responda as quest\u00f5es referente sua configura\u00e7\u00e3o Realm: SEU.Dominio Domain [AD]: Dom\u00ednio Server Role (dc, member, standalone) [dc]: dc DNS backend (SAMBA_INTERNAL, BIND9_FLATFILE, BIND9_DLZ, NONE) SAMBA_INTERNAL]: SAMBA_INTERNAL DNS forwarder IP address (write 'none' to disable forwarding) [SEU_IP_DNS]: IP DNS Administrator password: selecionar uma senha Retype password: repetir a senha anterior GUARDE SUA SENHA Configure o kerberos utilizando o comando: cp /usr/local/samba/private/krb5.conf /etc/krb5.conf Iniciar o Samba Utilizar o comando: samba Criando zona reversa Criar uma zona reversa. Substitua com o seu IP . Use o comando: samba-tool dns zonecreate 10.1.1.21 0.99.10.in-addr.arpa -U Administrator Password for [domains\\Administrator]: UTILIZAR A SENHA DE PROVISIONAMENTO Zone 0.99.10.in-addr.arpa created successfully Verificar o file server: Fa\u00e7a o comando: smbclient -L localhost -N Anonymous login successful Sharename Type Comment --------- ---- ------- sysvol Disk netlogon Disk IPC$ IPC IPC Service (Samba 4.18.6) SMB1 disabled -- no workgroup available Verificando a autentica\u00e7\u00e3o com o netlogon Utilizar o comando abaixo: smbclient //localhost/netlogon -UAdministrator -c 'ls' O comando vai pedir a senha de provisionamento do samba Password for [SEU\\Administrator]: . D 0 Thu Aug 31 14:43:08 2023 .. D 0 Thu Aug 31 14:43:17 2023 31861548 blocks of size 1024. 26686664 blocks availableIniciar o samba","title":"Provisionar o Samba"},{"location":"provsamba/provsamba/#provisionar-o-samba-modo-interativo","text":"Verifique o ip com o comando: ip a O resultador pode parecer com este abaixo: 2: ens18: mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether 8e:a2:1e:57:9a:9e brd ff:ff:ff:ff:ff:ff altname enp0s18 inet 10.1.1.21/8 brd 10.255.255.255 scope global ens18 Ent\u00e3o, seu dispositivo de rede \u00e9 o ens18 Remover o arquivo smb.conf com o comando: rm /etc/samba/smb.conf Provisionar o Samba Utilizar o comando abaixo: samba-tool domain provision --use-rfc2307 --interactive --option=\"interfaces= lo ens18\" --option=\"bind interfaces only=yes\" Responda as quest\u00f5es referente sua configura\u00e7\u00e3o Realm: SEU.Dominio Domain [AD]: Dom\u00ednio Server Role (dc, member, standalone) [dc]: dc DNS backend (SAMBA_INTERNAL, BIND9_FLATFILE, BIND9_DLZ, NONE) SAMBA_INTERNAL]: SAMBA_INTERNAL DNS forwarder IP address (write 'none' to disable forwarding) [SEU_IP_DNS]: IP DNS Administrator password: selecionar uma senha Retype password: repetir a senha anterior GUARDE SUA SENHA Configure o kerberos utilizando o comando: cp /usr/local/samba/private/krb5.conf /etc/krb5.conf Iniciar o Samba Utilizar o comando: samba Criando zona reversa Criar uma zona reversa. Substitua com o seu IP . Use o comando: samba-tool dns zonecreate 10.1.1.21 0.99.10.in-addr.arpa -U Administrator Password for [domains\\Administrator]: UTILIZAR A SENHA DE PROVISIONAMENTO Zone 0.99.10.in-addr.arpa created successfully Verificar o file server: Fa\u00e7a o comando: smbclient -L localhost -N Anonymous login successful Sharename Type Comment --------- ---- ------- sysvol Disk netlogon Disk IPC$ IPC IPC Service (Samba 4.18.6) SMB1 disabled -- no workgroup available Verificando a autentica\u00e7\u00e3o com o netlogon Utilizar o comando abaixo: smbclient //localhost/netlogon -UAdministrator -c 'ls' O comando vai pedir a senha de provisionamento do samba Password for [SEU\\Administrator]: . D 0 Thu Aug 31 14:43:08 2023 .. D 0 Thu Aug 31 14:43:17 2023 31861548 blocks of size 1024. 26686664 blocks availableIniciar o samba","title":"Provisionar o Samba (modo interativo):"},{"location":"systemdad/systemdad/","text":"Servi\u00e7o systemd para o AD-DC \u00c9 um servi\u00e7o autom\u00e1tico para o samba-ad-dc subir com o boot do sistema assim como, parar, reiniciar, habilitar ou desabilitar o samba-ad-dc. Criar o arquivo em: /etc/systemd/system/samba-ad-dc.service com o comando: nano /etc/systemd/system/samba-ad-dc.service Copie e cole o conte\u00fado abaixo no seu arquivo: [Unit] Description=Samba Active Directory Domain Controller After=network.target remote-fs.target nss-lookup.target [Service] Type=forking ExecStart=/usr/local/samba/sbin/samba -D PIDFile=/usr/local/samba/var/run/samba.pid ExecReload=/bin/kill -HUP $MAINPID [Install] WantedBy=multi-user.target salvar o arquivo Para salvar: control+o e para sair: control+x Executar o reload do systemd: systemctl daemon-reload Habilitar o samba-ad-dc no boot do sistema: systemctl enable samba-ad-dc Restart o servi\u00e7o do samba-ad-dc: systemctl restart samba-ad-dc Verificar o status do samba, usar o comando: systemctl status samba-ad-dc Verificar a vers\u00e3o do samba: smbclient --version","title":"Servi\u00e7o systemd AD-DC"},{"location":"systemdad/systemdad/#servico-systemd-para-o-ad-dc","text":"\u00c9 um servi\u00e7o autom\u00e1tico para o samba-ad-dc subir com o boot do sistema assim como, parar, reiniciar, habilitar ou desabilitar o samba-ad-dc. Criar o arquivo em: /etc/systemd/system/samba-ad-dc.service com o comando: nano /etc/systemd/system/samba-ad-dc.service Copie e cole o conte\u00fado abaixo no seu arquivo: [Unit] Description=Samba Active Directory Domain Controller After=network.target remote-fs.target nss-lookup.target [Service] Type=forking ExecStart=/usr/local/samba/sbin/samba -D PIDFile=/usr/local/samba/var/run/samba.pid ExecReload=/bin/kill -HUP $MAINPID [Install] WantedBy=multi-user.target salvar o arquivo Para salvar: control+o e para sair: control+x Executar o reload do systemd: systemctl daemon-reload Habilitar o samba-ad-dc no boot do sistema: systemctl enable samba-ad-dc Restart o servi\u00e7o do samba-ad-dc: systemctl restart samba-ad-dc Verificar o status do samba, usar o comando: systemctl status samba-ad-dc Verificar a vers\u00e3o do samba: smbclient --version","title":"Servi\u00e7o systemd para o AD-DC"},{"location":"timedate/timedate/","text":"Data e hora do sistema Servidor de data e hora NTP Verificar as informa\u00e7\u00f5es de de data e hora do servidor ntp com o comando: timedatectl Para listar os timezones fazer o comando: timedatectl list-timezones Para setar o timezone desejado use o comando: timedatectl set-timezone \"America/Sao_Paulo\"","title":"TimeDate (ntp server)"},{"location":"timedate/timedate/#data-e-hora-do-sistema","text":"Servidor de data e hora NTP Verificar as informa\u00e7\u00f5es de de data e hora do servidor ntp com o comando: timedatectl Para listar os timezones fazer o comando: timedatectl list-timezones Para setar o timezone desejado use o comando: timedatectl set-timezone \"America/Sao_Paulo\"","title":"Data e  hora do sistema"}]}